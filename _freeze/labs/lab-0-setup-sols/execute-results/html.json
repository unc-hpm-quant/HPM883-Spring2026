{
  "hash": "74ef77750ba2947ef7b3da8c907fdd4c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 0: Environment Setup & Verification — SOLUTIONS\"\nsubtitle: \"Instructor Version\"\nauthor: \"HPM 883 Teaching Team\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n    code-fold: false\nexecute:\n  echo: true\n  warning: true\n  message: true\n---\n\n::: {.callout-warning}\n## Instructor Only\n\nThis document contains solutions and grading guidance. Do not distribute to students.\n:::\n\n---\n\n## Grading Overview\n\n| Part | Points | Criteria |\n|------|--------|----------|\n| Part 1: Environment Check | 5 | Packages load, R version ≥ 4.3.0 |\n| Part 2: Data Loading | 5 | Data loads, glimpse/summary run |\n| Part 3: Basic Analysis | 5 | Models run, reasonable interpretation |\n| Part 4: Visualization | 5 | Both plots render correctly |\n| Part 5: Render & Submit | 5 | HTML renders, pushed to GitHub |\n| **Total** | **25** | Pass/Fail on each component |\n\n**Pass threshold:** All 5 parts must pass. If any part fails, student should resubmit.\n\n---\n\n## Part 1: Environment Check (5 points)\n\n### 1.1 R Version\n\n\n::: {.cell}\n\n```{.r .cell-code}\nR.version.string\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"R version 4.4.1 (2024-06-14)\"\n```\n\n\n:::\n:::\n\n\n**Expected output:** `R version 4.3.0` or higher (4.3.x, 4.4.x acceptable)\n\n**Grading:** ✓ if version ≥ 4.3.0\n\n### 1.2 Working Directory\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"/Users/sysylvia/Documents/Repos/HPM883-Spring2026/labs\"\n```\n\n\n:::\n:::\n\n**Expected output:** Path ending in the lab repository folder (e.g., `/path/to/lab-0-username/`)\n\n**Grading:** ✓ if in a project directory (not home directory)\n\n### 1.3 Load Required Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(estimatr)\nlibrary(gt)\n```\n:::\n\n\n**Expected output:** Packages load with possible startup messages. No errors.\n\n**Grading:** ✓ if all three packages load without error\n\n::: {.callout-note}\n## Common Issues\n\n- If `renv::restore()` wasn't run, packages won't load\n- If renv cache is corrupted, may need to delete `renv/library/` and re-run restore\n:::\n\n---\n\n## Part 2: Data Loading (5 points)\n\n### 2.1 Load the Sample Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"data/sample_data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 50 Columns: 5\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (5): id, treatment, age, baseline, outcome\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n**Expected output:** Data loads with column specification message.\n\n### 2.2 Explore the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 50\nColumns: 5\n$ id        <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…\n$ treatment <dbl> 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, …\n$ age       <dbl> 48, 39, 44, 56, 39, 50, 41, 58, 48, 35, 55, 47, 38, 51, 60, …\n$ baseline  <dbl> 114.06, 103.99, 110.44, 82.96, 113.59, 93.42, 87.04, 98.34, …\n$ outcome   <dbl> 78.74, 91.95, 82.87, 72.99, 79.23, 79.24, 63.51, 86.29, 95.4…\n```\n\n\n:::\n:::\n\n\n**Expected output:**\n```\nRows: 50\nColumns: 5\n$ id        <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...\n$ treatment <dbl> 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, ...\n$ age       <dbl> 48, 39, 44, 56, 39, 50, 41, 58, 48, 35, ...\n$ baseline  <dbl> 114.06, 103.99, 110.44, 82.96, 113.59, ...\n$ outcome   <dbl> 78.74, 91.95, 82.87, 72.99, 79.23, ...\n```\n\n### 2.3 Summary Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       id          treatment        age           baseline         outcome     \n Min.   : 1.00   Min.   :0.0   Min.   :31.00   Min.   : 76.97   Min.   :62.09  \n 1st Qu.:13.25   1st Qu.:0.0   1st Qu.:39.25   1st Qu.: 91.91   1st Qu.:74.68  \n Median :25.50   Median :0.5   Median :45.50   Median :101.00   Median :82.71  \n Mean   :25.50   Mean   :0.5   Mean   :45.58   Mean   :100.32   Mean   :81.29  \n 3rd Qu.:37.75   3rd Qu.:1.0   3rd Qu.:50.75   3rd Qu.:109.17   3rd Qu.:89.30  \n Max.   :50.00   Max.   :1.0   Max.   :62.00   Max.   :127.40   Max.   :97.89  \n```\n\n\n:::\n:::\n\n\n**Question:** How many observations are in the dataset? How many are treated vs. control?\n\n**Expected answer:**\n- 50 observations total\n- 25 treated (treatment = 1)\n- 25 control (treatment = 0)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Verify treatment counts\ntable(data$treatment)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n 0  1 \n25 25 \n```\n\n\n:::\n:::\n\n\n**Grading:** ✓ if student correctly identifies n=50, and approximately equal treatment/control split (25/25)\n\n---\n\n## Part 3: Basic Analysis (5 points)\n\n### 3.1 Estimate Treatment Effect\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel <- lm_robust(outcome ~ treatment, data = data)\ntidy(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n         term estimate std.error statistic      p.value  conf.low conf.high df\n1 (Intercept)  76.9428  1.657829 46.411790 1.533089e-41 73.609512  80.27609 48\n2   treatment   8.6936  2.468212  3.522226 9.500256e-04  3.730927  13.65627 48\n  outcome\n1 outcome\n2 outcome\n```\n\n\n:::\n:::\n\n\n**Expected output (approximate):**\n\n| term | estimate | std.error | p.value |\n|------|----------|-----------|---------|\n| (Intercept) | ~77 | ~2.0 | <0.001 |\n| treatment | ~5-7 | ~2.8 | ~0.02-0.05 |\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm_robust(formula = outcome ~ treatment, data = data)\n\nStandard error type:  HC2 \n\nCoefficients:\n            Estimate Std. Error t value  Pr(>|t|) CI Lower CI Upper DF\n(Intercept)   76.943      1.658  46.412 1.533e-41   73.610    80.28 48\ntreatment      8.694      2.468   3.522 9.500e-04    3.731    13.66 48\n\nMultiple R-squared:  0.2054 ,\tAdjusted R-squared:  0.1888 \nF-statistic: 12.41 on 1 and 48 DF,  p-value: 0.00095\n```\n\n\n:::\n:::\n\n\n### 3.2 Interpret Results\n\n**Question:** What is the estimated treatment effect? Is it statistically significant at the 5% level?\n\n**Expected answer:**\n- Treatment effect is approximately **5-7 units** (the coefficient on `treatment`)\n- It **is** statistically significant at 5% level (p-value < 0.05)\n- Interpretation: Being in the treatment group is associated with an increase in outcome of approximately X units compared to control\n\n**Grading:** ✓ if student correctly:\n1. Identifies the treatment coefficient as the effect estimate\n2. Correctly assesses significance based on p-value or CI\n\n### 3.3 Add Covariates\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_adj <- lm_robust(outcome ~ treatment + baseline, data = data)\ntidy(model_adj)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n         term estimate  std.error statistic      p.value   conf.low  conf.high\n1 (Intercept) 9.414095 6.02224370  1.563221 1.247097e-01 -2.7010966 21.5292867\n2   treatment 8.964997 1.12414518  7.974946 2.776370e-10  6.7035087 11.2264855\n3    baseline 0.671775 0.06017667 11.163379 8.159802e-15  0.5507152  0.7928349\n  df outcome\n1 47 outcome\n2 47 outcome\n3 47 outcome\n```\n\n\n:::\n:::\n\n\n**Question:** How does the treatment effect estimate change when you add baseline as a covariate? Why might this happen?\n\n**Expected answer:**\n- The treatment effect estimate may **decrease slightly** (precision improves)\n- Adding baseline **reduces residual variance** because baseline is correlated with outcome\n- This demonstrates that covariate adjustment can improve precision in RCTs (variance reduction)\n- The estimate shouldn't change dramatically if randomization worked (treatment should be uncorrelated with baseline)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compare estimates\ndata.frame(\n  Model = c(\"Unadjusted\", \"Covariate-adjusted\"),\n  Estimate = c(coef(model)[\"treatment\"], coef(model_adj)[\"treatment\"]),\n  SE = c(sqrt(vcov(model)[\"treatment\", \"treatment\"]),\n         sqrt(vcov(model_adj)[\"treatment\", \"treatment\"]))\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n               Model Estimate       SE\n1         Unadjusted 8.693600 2.468212\n2 Covariate-adjusted 8.964997 1.124145\n```\n\n\n:::\n:::\n\n\n**Grading:** ✓ if student recognizes that:\n1. Covariate adjustment can change precision (SE)\n2. The point estimate shouldn't change dramatically under randomization\n\n---\n\n## Part 4: Visualization (5 points)\n\n### 4.1 Treatment Effect Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = factor(treatment), y = outcome, fill = factor(treatment))) +\n  geom_boxplot(alpha = 0.7) +\n  scale_fill_manual(values = c(\"0\" = \"#4BACC6\", \"1\" = \"#9BBB59\"),\n                    labels = c(\"Control\", \"Treatment\")) +\n  labs(\n    title = \"Treatment Effect on Outcome\",\n    x = \"Treatment Status\",\n    y = \"Outcome\",\n    fill = \"Group\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Outcome by Treatment Status](lab-0-setup-sols_files/figure-html/boxplot-1.png){fig-alt='Boxplot showing outcome distribution for treatment and control groups' width=672}\n:::\n:::\n\n\n**Grading:** ✓ if boxplot renders with two groups visible and clear visual difference\n\n### 4.2 Scatter Plot with Regression Line\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = baseline, y = outcome, color = factor(treatment))) +\n  geom_point(alpha = 0.6, size = 2) +\n  geom_smooth(method = \"lm\", se = TRUE) +\n  scale_color_manual(values = c(\"0\" = \"#4BACC6\", \"1\" = \"#9BBB59\"),\n                     labels = c(\"Control\", \"Treatment\")) +\n  labs(\n    title = \"Baseline vs Outcome by Treatment Status\",\n    x = \"Baseline Value\",\n    y = \"Outcome\",\n    color = \"Group\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![Baseline vs Outcome by Treatment](lab-0-setup-sols_files/figure-html/scatter-1.png){fig-alt='Scatter plot showing relationship between baseline and outcome, colored by treatment' width=672}\n:::\n:::\n\n\n**Grading:** ✓ if scatter plot renders with:\n- Points colored by treatment\n- Regression lines for each group\n- Visual parallel shift between groups (treatment effect)\n\n---\n\n## Part 5: Render & Submit (5 points)\n\n### 5.1 Render to HTML\n\n**Grading:** ✓ if HTML file is present in repository\n\n### 5.2 Commit and Push\n\n**Grading:** ✓ if commit history shows:\n- Meaningful commit message\n- Changes pushed before deadline\n\n### 5.3 Verify Submission\n\n**Grading:** ✓ if GitHub repository contains:\n- `lab-0-setup.qmd` (completed)\n- `lab-0-setup.html` (rendered)\n- Commit timestamp before deadline\n\n---\n\n## Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 26.0.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] gt_0.11.1       estimatr_1.0.6  lubridate_1.9.4 forcats_1.0.0  \n [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n [9] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] generics_0.1.3    renv_1.1.0        xml2_1.3.6        lattice_0.22-6   \n [5] stringi_1.8.4     hms_1.1.3         digest_0.6.37     magrittr_2.0.3   \n [9] evaluate_1.0.3    grid_4.4.1        timechange_0.3.0  fastmap_1.2.0    \n[13] Matrix_1.7-2      jsonlite_1.8.9    Formula_1.2-5     mgcv_1.9-1       \n[17] scales_1.3.0      cli_3.6.3         rlang_1.1.5       crayon_1.5.3     \n[21] splines_4.4.1     bit64_4.6.0-1     munsell_0.5.1     withr_3.0.2      \n[25] yaml_2.3.10       tools_4.4.1       parallel_4.4.1    tzdb_0.4.0       \n[29] colorspace_2.1-1  vctrs_0.6.5       R6_2.5.1          lifecycle_1.0.4  \n[33] htmlwidgets_1.6.4 bit_4.5.0.1       vroom_1.6.5       pkgconfig_2.0.3  \n[37] pillar_1.10.1     gtable_0.3.6      glue_1.8.0        Rcpp_1.0.14      \n[41] xfun_0.50         tidyselect_1.2.1  knitr_1.49        farver_2.1.2     \n[45] nlme_3.1-167      htmltools_0.5.8.1 rmarkdown_2.29    labeling_0.4.3   \n[49] compiler_4.4.1   \n```\n\n\n:::\n:::\n\n\n---\n\n## Common Student Errors & How to Address\n\n### Environment Issues\n\n| Error | Solution |\n|-------|----------|\n| `renv::restore()` fails | Delete `renv/library/`, run `renv::restore()` again |\n| Package not found | Check that `renv.lock` is present and run restore |\n| R version too old | Update R to 4.3.0+ via CRAN |\n| Quarto won't render | Install Quarto CLI, restart IDE |\n\n### Code Issues\n\n| Error | Solution |\n|-------|----------|\n| `object 'data' not found` | Ensure Part 2.1 code chunk ran first |\n| `could not find function \"lm_robust\"` | Load `estimatr` package |\n| Plot doesn't display | Check that ggplot code is complete |\n\n### Submission Issues\n\n| Error | Solution |\n|-------|----------|\n| Git push fails | Check SSH key setup or use HTTPS |\n| HTML not in repo | Commit and push the HTML file explicitly |\n| Wrong repo | Ensure using GitHub Classroom-created repo |\n\n---\n\n## Grading Checklist\n\nUse this checklist when grading submissions:\n\n- [ ] **Part 1:** R ≥ 4.3.0, all packages load\n- [ ] **Part 2:** Data loads, correct n=50, treatment split identified\n- [ ] **Part 3:** Models run, treatment effect correctly interpreted, significance assessed\n- [ ] **Part 4:** Both plots render correctly\n- [ ] **Part 5:** HTML in repo, committed before deadline\n\n**Pass:** All 5 boxes checked\n**Fail:** Any box unchecked (student should resubmit)\n\n---\n\n*Last updated: 2025-12-25*\n",
    "supporting": [
      "lab-0-setup-sols_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}